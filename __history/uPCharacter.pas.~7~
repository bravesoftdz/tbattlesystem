unit uPCharacter;

{/***************************************************************************
                          uPCharacter.pas  -  description
                             -------------------
    begin                : Wed Jan 28 2014
    copyright            : (C) 2014 by Enrique Fuentes
    email                : deejaykike@gmail.com
 ***************************************************************************/

/***************************************************************************
 *                                                                         *
 *   This program is free software; you can redistribute it and/or modify  *
 *   it under the terms of the GNU General Public License as published by  *
 *   the Free Software Foundation; either version 2 of the License, or     *
 *   (at your option) any later version.                                   *
 *                                                                         *
 ***************************************************************************/
 }

interface

uses
  uCharacter,
  uDice,
  uAttribs,
  uWeapon,
  uArmour,
  System.SysUtils;

type

TPCharacter = class(TCharacter)
  private
    fStr: TStrengthAttrib ;
    fDex: TDexterityAttrib ;
    fCon: TConstitutionAttrib ;
    fInt: TIntelligenceAttrib ;
    fWis: TWisdomAttrib ;
    fCha: TCharismaAttrib ;
    fDexACAdj, fConHPAdj: Integer;
    //fRace: TRace;
    //fClass: TClasse;
    fLevel, fXPEarned: Integer;
    function HitPoints: Integer;
    //function checkClass(aClass: TClasse): Boolean;
    //function verifyRace(aRace: TRace): Boolean;
    //function verifyClass(aClass: TClasse): Boolean;
    function GetTHACO : Integer; virtual;
    class function min(x,y: Integer): Integer; static;
    class function max(x,y: Integer): Integer; static;
  public
    //constructor Create(IntendedRace: TRace; IntendedClass: TClass; initialWeapon: TWeapon; initialArmour: TArmour; startingLevel: Integer; Name: string);
    function GetAC: Integer; overload; virtual;
    function GetAC(const DamageType: Integer): Integer; overload; virtual;
    function doDamage(const Target: TCharacter): Integer; virtual;
    function haveClass: Boolean;
    function earnXP(amount: Integer): Integer;
end;

implementation

class function TPCharacter.min(x,y: Integer): Integer; static;
begin

end;
class function TPCharacter.max(x,y: Integer): Integer; static;
begin

end;

constructor TPCharacter.Create(IntendedRace: TRace; IntendedClass: TClass; initialWeapon: TWeapon; initialArmour: TArmour; startingLevel: Integer; Name: string);
begin
  inherited Create(initialWeapon,initialArmour,Name);
  fstr:=TDice.Dice(3,6,0);
  fdex:=TDice.Dice(3,6,0);
  fcon:=TDice.Dice(3,6,0);
  fInt:=TDice.Dice(3,6,0);
  fWis:=TDice.Dice(3,6,0);
  fCha:=TDice.Dice(3,6,0);

end;

function TPCharacter.GetTHACO;
begin
  Result:=TCharacter.Thaco + fDex.dexACMod;
end;

function TPCharacter.GetAC(const DamageType: Integer): Integer;
begin
  Result:=pArmour.getAC(TDamageTypes(DamageType) + fDex.dexACMod);
end;

function TPCharacter.GetAC: Integer;
begin
  Result:=TCharacter.getAC + fDex.dexACMod;
end;

function TPCharacter.doDamage(const Target: TCharacter): Integer;
var
  Damage: Integer;
begin
  Damage:=pWeapon.returnDamage;
  Target.LoseHP(Damage);
  Result:=Damage;
end;

function TPCharacter.checkClass(aClass: TClasse): Boolean;
begin

end;

function TPCharacter.verifyRace(aRace: TRace): Boolean;
begin

end;

function TPCharacter.verifyClass(aClass: TClasse): Boolean;
begin

end;

function TPCharacter.earnXP(amount: Integer): Integer;
begin
  Inc(fXPEarned,Amount);
  Result:=fXPEarned;
end;



end.
